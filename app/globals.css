@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
}

:root {
  --foreground-rgb: 42, 49, 50;
  --background-rgb: 248, 246, 243;
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Selection color */
::selection {
  background-color: rgba(85, 91, 92, 0.2);
}

/* Global focus-visible styles for accessibility */
a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
[tabindex]:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgb(var(--background-rgb)), 0 0 0 4px #7C3AED;
  border-radius: 4px;
}

/* Custom section styling */
.section-container {
  @apply relative;
}

.section-container::before {
  content: '';
  @apply absolute top-0 left-0 right-0 h-px bg-border;
}

/* Animated gradient background for cards */
.card-hover {
  @apply transition-all duration-300;
}

.card-hover:hover {
  @apply shadow-xl -translate-y-1;
}

/* Link underline animation */
.link-animate {
  @apply relative inline-block;
}

.link-animate::after {
  content: '';
  @apply absolute bottom-0 left-0 w-full h-[1px] bg-current origin-right scale-x-0 transition-transform duration-300;
}

.link-animate:hover::after {
  @apply origin-left scale-x-100;
}

/* Fade in animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
}

.animate-delay-100 { animation-delay: 0.1s; }
.animate-delay-200 { animation-delay: 0.2s; }
.animate-delay-300 { animation-delay: 0.3s; }
.animate-delay-400 { animation-delay: 0.4s; }

/* Global link styling */
a:not(.no-underline):not([class*="rounded"]) {
  color: #2A3132; /* Primary text color */
  text-decoration: underline;
  text-decoration-color: #CCCCCC; /* Muted underline */
  text-underline-offset: 4px;
  text-decoration-skip-ink: auto; /* Skip descenders */
  text-decoration-thickness: 1px;
  transition: text-decoration-color 0.2s ease;
}

a:not(.no-underline):not([class*="rounded"]):hover {
  text-decoration-color: #555B5C; /* Neutral on hover */
}

/* Link icons - secondary text color */
a svg,
a .link-icon {
  color: #5F6566; /* Secondary/tertiary text color */
  transition: color 0.2s ease;
}

a:hover svg,
a:hover .link-icon {
  color: #555B5C; /* Neutral on hover */
}

/* External link arrow icons in prose - proper baseline alignment */
.prose-custom a svg {
  display: inline-block;
  width: 0.75em;
  height: 0.75em;
  margin-left: 0.15em;
  vertical-align: baseline;
  position: relative;
  top: 0.05em;
  flex-shrink: 0;
}

/* ===========================================
   TYPOGRAPHY & PROSE STYLES
   =========================================== */

/* Lead paragraph - larger intro text */
.text-lead {
  @apply text-xl md:text-2xl leading-relaxed text-text-primary;
  max-width: 65ch; /* Optimal line length for readability */
}

/* Body paragraph - standard text */
.text-body {
  @apply text-lg leading-relaxed text-text-secondary;
  max-width: 65ch; /* Optimal line length: 50-75 chars */
}

/* Small text */
.text-small {
  @apply text-base leading-relaxed text-text-secondary;
  max-width: 70ch; /* Slightly wider for smaller text */
}

/* Section label - uppercase eyebrow text */
.section-label {
  @apply text-sm uppercase tracking-widest text-text-tertiary font-medium;
}

/* ===========================================
   PROSE CONTENT BLOCKS
   =========================================== */

.prose-custom {
  /* Optimal line length for all prose content */
  max-width: 65ch;
  
  /* Headings */
  & h2 {
    @apply text-2xl md:text-3xl font-semibold tracking-tight mt-16 mb-6 text-text-primary;
  }
  
  & h2:first-child {
    @apply mt-0;
  }
  
  & h3 {
    @apply text-xl md:text-2xl font-semibold tracking-tight mt-12 mb-4 text-text-primary;
  }
  
  & h4 {
    @apply text-lg font-semibold mt-8 mb-3 text-text-primary;
  }
  
  /* Paragraphs - optimal reading: 50-75 chars, ~66 ideal */
  & p {
    @apply mb-6 text-text-secondary leading-[1.75] text-lg;
    max-width: 65ch;
  }
  
  & p:last-child {
    @apply mb-0;
  }
  
  /* Lead paragraph - first p after heading or first in section */
  & > p:first-child,
  & h2 + p,
  & h3 + p {
    @apply text-text-primary;
  }
  
  /* Lists */
  & ul {
    @apply list-disc pl-6 mb-6 space-y-3 text-text-secondary;
    max-width: 65ch;
  }
  
  & ol {
    @apply list-decimal pl-6 mb-6 space-y-3 text-text-secondary;
    max-width: 65ch;
  }
  
  & li {
    @apply leading-[1.75] text-lg;
  }
  
  & li p {
    @apply mb-0;
  }
  
  /* Strong/bold text */
  & strong {
    @apply font-semibold text-text-primary;
  }
  
  /* Block quotes */
  & blockquote {
    @apply border-l-4 border-accent pl-6 my-8 italic text-text-secondary;
    max-width: 60ch; /* Slightly narrower for emphasis */
  }
  
  & blockquote p {
    @apply mb-4;
  }
  
  /* Figures and images */
  & figure {
    @apply my-10;
  }
  
  & figure img {
    @apply rounded-2xl w-full;
  }
  
  & figcaption {
    @apply text-sm text-text-tertiary mt-3 text-center;
  }
  
  /* Horizontal rules */
  & hr {
    @apply border-t border-border my-12;
  }
  
  /* Code */
  & code {
    @apply bg-background-secondary px-1.5 py-0.5 rounded text-sm font-mono;
  }
  
  & pre {
    @apply bg-background-secondary p-4 rounded-xl overflow-x-auto my-6;
  }
  
  & pre code {
    @apply bg-transparent p-0;
  }
}

/* Spacing between consecutive paragraphs in articles */
article p + p {
  @apply mt-0;
}
