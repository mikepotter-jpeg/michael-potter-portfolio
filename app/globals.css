@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
}

:root {
  --foreground-rgb: 42, 49, 50;
  --background-rgb: 248, 246, 243;
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Selection color */
::selection {
  background-color: rgba(85, 91, 92, 0.2);
}

/* ===========================================
   TRANSITION & TIMING UTILITIES
   =========================================== */

@layer utilities {
  /* Fast transitions for color changes */
  .transition-fast {
    @apply transition-colors duration-fast;
  }

  /* Normal transitions */
  .transition-normal {
    @apply transition-all duration-normal;
  }

  /* Medium transitions for transforms and complex changes */
  .transition-medium {
    @apply transition-all duration-medium;
  }

  /* Slow transitions for complex animations */
  .transition-slow {
    @apply transition-all duration-slow;
  }
}

/* Global focus-visible styles for accessibility */
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
[tabindex]:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgb(var(--background-rgb)), 0 0 0 4px theme('colors.focus.ring') !important;
  border-radius: theme('borderRadius.button');
}

/* Links get outline-style focus without border-radius */
a:focus-visible {
  outline: 2px solid theme('colors.focus.ring');
  outline-offset: 2px;
}

/* Navigation menu items - ensure focus ring overrides Radix UI */
[role="menuitem"]:focus-visible,
[role="menuitemcheckbox"]:focus-visible,
[role="menuitemradio"]:focus-visible {
  outline: 2px solid theme('colors.focus.ring') !important;
  outline-offset: 2px !important;
  box-shadow: none !important;
}

/* Card hover effect - consistent elevation */
.card-hover {
  @apply transition-medium;
}

.card-hover:hover {
  @apply shadow-xl -translate-y-1;
}

/* Fade in animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
}

/* ===========================================
   LINK STYLES
   =========================================== */

/* Default link styling - underline that passes behind descenders */
a {
  text-decoration: underline;
  text-decoration-color: theme('colors.border.DEFAULT');
  text-underline-offset: 0.15em;
  text-decoration-thickness: 1px;
  text-decoration-skip-ink: auto;
  transition: text-decoration-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

a:hover {
  text-decoration-color: theme('colors.accent.DEFAULT');
}

/* Remove underline for interactive components */
.no-underline,
a[class*="rounded"],
a[class*="button"] {
  text-decoration: none;
}

/* Link icons - inherit color from link, transition with link */
a svg {
  transition: color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* External link arrow icons in prose - proper baseline alignment */
.prose-custom a svg {
  display: inline-block;
  width: 0.75em;
  height: 0.75em;
  margin-left: 0.15em;
  vertical-align: baseline;
  position: relative;
  top: 0.05em;
  flex-shrink: 0;
}

/* ===========================================
   TYPOGRAPHY & PROSE STYLES
   =========================================== */

/* Lead paragraph - larger intro text */
.text-lead {
  @apply text-xl md:text-2xl leading-relaxed text-text-primary max-w-prose;
}

/* Body paragraph - standard text */
.text-body {
  @apply text-lg leading-relaxed text-text-secondary max-w-prose;
}

/* Small text */
.text-small {
  @apply text-base leading-relaxed text-text-secondary max-w-prose;
}

/* Section label - uppercase eyebrow text */
.section-label {
  @apply text-ui uppercase tracking-widest text-text-tertiary font-medium;
}

/* ===========================================
   PROSE CONTENT BLOCKS
   =========================================== */

.prose-custom {
  @apply max-w-prose;
  
  /* Headings */
  & h2 {
    @apply text-heading-3 mt-16 mb-6 text-text-primary;
  }
  
  & h2:first-child {
    @apply mt-0;
  }
  
  & h3 {
    @apply text-heading-4 mt-12 mb-4 text-text-primary;
  }
  
  & h4 {
    @apply text-body-xl font-semibold mt-8 mb-3 text-text-primary;
  }
  
  /* Paragraphs */
  & p {
    @apply mb-6 text-text-secondary leading-[1.75] text-body max-w-prose;
  }
  
  & p:last-child {
    @apply mb-0;
  }
  
  /* Lead paragraph - first p after heading or first in section */
  & > p:first-child,
  & h2 + p,
  & h3 + p {
    @apply text-text-primary;
  }
  
  /* Lists */
  & ul {
    @apply list-disc pl-6 mb-6 space-y-3 text-text-secondary max-w-prose;
  }
  
  & ol {
    @apply list-decimal pl-6 mb-6 space-y-3 text-text-secondary max-w-prose;
  }
  
  & li {
    @apply leading-[1.75] text-body;
  }
  
  & li p {
    @apply mb-0;
  }
  
  /* Strong/bold text */
  & strong {
    @apply font-semibold text-text-primary;
  }
  
  /* Block quotes */
  & blockquote {
    @apply border-l-4 border-accent pl-6 my-8 italic text-text-secondary max-w-[60ch];
  }
  
  & blockquote p {
    @apply mb-4;
  }
  
  /* Figures and images */
  & figure {
    @apply my-10;
  }
  
  & figure img {
    @apply rounded-card-lg w-full;
  }
  
  & figcaption {
    @apply text-ui-sm text-text-tertiary mt-3 text-center;
  }
  
  /* Horizontal rules */
  & hr {
    @apply border-t border-border my-12;
  }
  
  /* Code */
  & code {
    @apply bg-background-secondary px-1.5 py-0.5 rounded text-ui font-mono;
  }
  
  & pre {
    @apply bg-background-secondary p-4 rounded-card overflow-x-auto my-6;
  }
  
  & pre code {
    @apply bg-transparent p-0;
  }
}

/* Spacing between consecutive paragraphs in articles */
article p + p {
  @apply mt-0;
}
